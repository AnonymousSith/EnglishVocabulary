# Проект «Словарный запас изучаемого языка»

**Цель:** расширять словарный запас языка: академическая лексика родного языка, лексика изучаемого языка.

**Задача:** повторять слова, находить самые труднозапоминаемые, получать примеры употребления слов для лучшего 
запоминания из реального узуса носителей, используя **НКРЯ**, сохранять все данные в облаке etc.

**Общий принцип:** пользователь изучает множество слов, выгружает их в базу специальной функцией. В дальнейшем 
происходит работа с самой базой. Изучение слова происходит придумыванием грамматически верного предложения, где 
непосредственно из контекста ясно его значение. Далее пользователь собственные примеры вносит в соответствующую базу. 
Программа даёт возможность слова повторять, напоминать значения по собственным примерам, примерам из корпуса, сохранять 
все пользовательские данные в **Google Drive**, ведёт учёт повторения – находит самые труднозапоминаемые слова и 
позволяет их повторять, etc. 

Оригинальный язык – изучаемый язык. Нативный язык – родной язык изучающего.

### Структура:
1. Модуль **«Слова»**;
2. Модуль **«Backup»**;
3. Модуль **«Повторение»**;
4. Модуль **«Примеры»** – работа с собственными и корпусными примерами. Поиск примеров, получение корпусных, backup.

### Модуль «Слова»
### Модуль «Backup»
### Модуль «Повторение»:
Сначала вывод определений выбранных слов для напоминания. Затем окно из главного поля с 6 вариантами. Задача – найти 
соответствие. 
Подсказки – собственные примеры из базы или примеры из корпуса. 

Предусмотрено 4 режима работы:
1. Слово на оригинальном – определения на нативном;
2. Определение на нативном – слова на оригинальном;
3. Определение на оригинальном – определение на нативном;
4. Определение на нативном – определение на оригинальном;

### Модуль «Примеры»:
Работа как со своими, так и с корпусными примерами. Получение корпусных примеров: асинхронные запросы к корпусу, парсинг
html кода страниц, получение текстов оттуда. Допустимый диапазон количества запрашиваемых примеров – (0; 45],
при большем количестве корпус регулярно возвращает 429 ошибку. 
 

#### Основной функционал:
1. Получение по запросу своих или корпусных примеров употребления некоторого слова: корпусные примеры запрашиваются 
непосредственно из интернета, сайта http://ruscorpora.ru, свои – из локальной базы.
2. Backup;
 
 
#### Функции аснхронного обращения к URL:
1. **html_code**(URL, session) – асинхронный запрос к URL, получение html кода страницы; Если код ответа != 200, то
подождать (асинхронно) секунду и повторить попытку;
2. **bound_fetch** – работа с учётом семафоры;
3. **parse_urls**(urls) – корутина, получающая html коды всех url из списка;
4. **main_async**(urls) – синхронная функция, запускающая корутины. Возвращает список html кодов страниц;


#### Класс SelfExamples:
Работа с собственными примерами. При запросе примеров, поиска etc передавать слово без предлогов, артиклей и прочего. 

Определены:
1. __init__() – инициализация базы примеров;
2. **_load**() – выгрузить примеры из файла в базу, регистр сохранён, кодировка – UTF-8. Если файла нет – напечатать сообщение 
и вернуть пустой список;
3. **find**(item) – поиск примеров в базе, регистры приравниваются. Если примеров нет – пустой список;
4. **backup**() – backup файла базы. Имя файла на диске – {имя базы}_{количество примеров}; Печать: "'__class__' backupping"
5. **count**(item) – количество примеров слова;
6. __call__(item) – то же, что и **find**; 
7. __contains__ – есть ли слово в базе примеров; 
8. __str__ – строка с пронумерованными примерами;
9. __len__ – общий объём базы;
10. __getitem__ – стандартный списочный;
11. __bool__ – стандартный списочный;
12. __iter__ – стандартный списочный;


#### Класс CorpusExamples:
Базовый класс для корпусных примеров (**параллельный подкорпус** в составе **НКРЯ** и основной корпус) 

Определены:
1. __init__(URL, word) – URL с тэгами **lex** и **p_num**, откуда будут запрашиваться примеры, и слово, для которого они
запрашиваются; Для получения примеров каждого нового слова создаётся отдельный объект класса; 
2. **_new_examples**(count) – запросить count примеров, перемешать их, обновив базу; Значение count в диапазоне (0; 45], 
при запросе большего количества корпус возвращает 429 ошибку; 
3. **_request_examples**() – получить html коды count // 5 страниц (потому что в запросе к корпусу указано 5 документов 
на страницу), распрарсить их, вернуть список словарей, ключи и значения которых зависят от переопределяемой у 
наследников **_parse_str**();
4. **_parse_str**(text) – поведение не определено, зависит от подкорпуса, к которому происходит обращение; переопределён 
у наследников; 
5. **_parse_page**(html) – парсинг html кода (тэга ul) через bs4; 
6. **_parse_all**(htmls) – парсинг всех страниц, возвращает список словарей; 
7. **get**(count) – получить первые count примеров из имеющейся базы;
8. __len__ – общий объём базы;
9. __str__ – нумерованная печать «ключ.upper(): значение»;
10. __getitem__ – стандартный списочный;
11. __iter__ – стандартный списочный;
12. __bool__ – стандартный списочный;


#### Класс RussianCorpusExamples:
Наследник **CorpusExamples**, работа с основным подкорпусом в составе **НКРЯ**, то есть примеры русских слов.

Переопределены:
1. __init__(word, count) – сразу запрашивает count примеров к слову;
2. **_parse_str**(text) – возвращает словарь {'text': text, 'source': text source};


#### Класс ParallelCorpusExamples:
Наследник **CorpusExamples**, работа с параллельным подкорпусом в составе **НКРЯ**, то есть примеры английских текстов 
с нужным словом и их переводов.

Переопределены:
1. __init__(word, count) – сразу запрашивает count примеров к слову;
2. **_parse_str**(text) – возвращает словарь {'ru': russian text, 'en': english text, 'source': text source};
